<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An LMDB transaction."><title>Transaction in lmdb - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="lmdb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0 (051478957 2024-07-21)" data-channel="1.80.0" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../lmdb/index.html">lmdb</a><span class="version">0.14.0</span></h2></div><h2 class="location"><a href="#">Transaction</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.txn">txn</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.abort">abort</a></li><li><a href="#method.commit">commit</a></li><li><a href="#method.db_flags">db_flags</a></li><li><a href="#method.get">get</a></li><li><a href="#method.open_db">open_db</a></li><li><a href="#method.open_ro_cursor">open_ro_cursor</a></li><li><a href="#method.stat">stat</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate lmdb</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">lmdb</a>::<wbr><a class="trait" href="#">Transaction</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/lmdb/transaction.rs.html#40-137">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Transaction: <a class="trait" href="https://doc.rust-lang.org/1.80.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    // Required method
    fn <a href="#tymethod.txn" class="fn">txn</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../lmdb_sys/struct.MDB_txn.html" title="struct lmdb_sys::MDB_txn">MDB_txn</a>;

    // Provided methods
    fn <a href="#method.commit" class="fn">commit</a>(self) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.unit.html">()</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.abort" class="fn">abort</a>(self) { ... }
<span class="item-spacer"></span>    unsafe fn <a href="#method.open_db" class="fn">open_db</a>(&amp;self, name: <a class="enum" href="https://doc.rust-lang.org/1.80.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.str.html">str</a>&gt;) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.get" class="fn">get</a>&lt;'txn, K&gt;(
        &amp;'txn self,
        database: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>,
        key: <a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.reference.html">&amp;K</a>,
    ) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;&amp;'txn [<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.u8.html">u8</a>]&gt;
       <span class="where">where K: <a class="trait" href="https://doc.rust-lang.org/1.80.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.u8.html">u8</a>]&gt;</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.open_ro_cursor" class="fn">open_ro_cursor</a>&lt;'txn&gt;(&amp;'txn self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.RoCursor.html" title="struct lmdb::RoCursor">RoCursor</a>&lt;'txn&gt;&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.db_flags" class="fn">db_flags</a>(&amp;self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.DatabaseFlags.html" title="struct lmdb::DatabaseFlags">DatabaseFlags</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.stat" class="fn">stat</a>(&amp;self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.Stat.html" title="struct lmdb::Stat">Stat</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An LMDB transaction.</p>
<p>All database operations require a transaction.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.txn" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#45">source</a><h4 class="code-header">fn <a href="#tymethod.txn" class="fn">txn</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../lmdb_sys/struct.MDB_txn.html" title="struct lmdb_sys::MDB_txn">MDB_txn</a></h4></section></summary><div class="docblock"><p>Returns a raw pointer to the underlying LMDB transaction.</p>
<p>The caller <strong>must</strong> ensure that the pointer is not used after the
lifetime of the transaction.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.commit" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#50-56">source</a><h4 class="code-header">fn <a href="#method.commit" class="fn">commit</a>(self) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Commits the transaction.</p>
<p>Any pending operations will be saved.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.abort" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#61-63">source</a><h4 class="code-header">fn <a href="#method.abort" class="fn">abort</a>(self)</h4></section></summary><div class="docblock"><p>Aborts the transaction.</p>
<p>Any pending operations will not be saved.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.open_db" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#82-84">source</a><h4 class="code-header">unsafe fn <a href="#method.open_db" class="fn">open_db</a>(&amp;self, name: <a class="enum" href="https://doc.rust-lang.org/1.80.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.str.html">str</a>&gt;) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>&gt;</h4></section></summary><div class="docblock"><p>Opens a database in the transaction.</p>
<p>If <code>name</code> is <code>None</code>, then the default database will be opened, otherwise
a named database will be opened. The database handle will be private to
the transaction until the transaction is successfully committed. If the
transaction is aborted the returned database handle should no longer be
used.</p>
<p>Prefer using <code>Environment::open_db</code>.</p>
<h6 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h6>
<p>This function (as well as <code>Environment::open_db</code>,
<code>Environment::create_db</code>, and <code>Database::create</code>) <strong>must not</strong> be called
from multiple concurrent transactions in the same environment. A
transaction which uses this function must finish (either commit or
abort) before any other transaction may use this function.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#94-113">source</a><h4 class="code-header">fn <a href="#method.get" class="fn">get</a>&lt;'txn, K&gt;(&amp;'txn self, database: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>, key: <a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.reference.html">&amp;K</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;&amp;'txn [<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.u8.html">u8</a>]&gt;<div class="where">where
    K: <a class="trait" href="https://doc.rust-lang.org/1.80.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.80.0/std/primitive.u8.html">u8</a>]&gt;,</div></h4></section></summary><div class="docblock"><p>Gets an item from a database.</p>
<p>This function retrieves the data associated with the given key in the
database. If the database supports duplicate keys
(<code>DatabaseFlags::DUP_SORT</code>) then the first data item for the key will be
returned. Retrieval of other items requires the use of
<code>Transaction::cursor_get</code>. If the item is not in the database, then
<code>Error::NotFound</code> will be returned.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.open_ro_cursor" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#116-118">source</a><h4 class="code-header">fn <a href="#method.open_ro_cursor" class="fn">open_ro_cursor</a>&lt;'txn&gt;(&amp;'txn self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.RoCursor.html" title="struct lmdb::RoCursor">RoCursor</a>&lt;'txn&gt;&gt;</h4></section></summary><div class="docblock"><p>Open a new read-only cursor on the given database.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.db_flags" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#121-127">source</a><h4 class="code-header">fn <a href="#method.db_flags" class="fn">db_flags</a>(&amp;self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.DatabaseFlags.html" title="struct lmdb::DatabaseFlags">DatabaseFlags</a>&gt;</h4></section></summary><div class="docblock"><p>Gets the option flags for the given database in the transaction.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.stat" class="method"><a class="src rightside" href="../src/lmdb/transaction.rs.html#130-136">source</a><h4 class="code-header">fn <a href="#method.stat" class="fn">stat</a>(&amp;self, db: <a class="struct" href="struct.Database.html" title="struct lmdb::Database">Database</a>) -&gt; <a class="type" href="type.Result.html" title="type lmdb::Result">Result</a>&lt;<a class="struct" href="struct.Stat.html" title="struct lmdb::Stat">Stat</a>&gt;</h4></section></summary><div class="docblock"><p>Retrieves database statistics.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.80.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-Transaction-for-RoTransaction%3C'env%3E" class="impl"><a class="src rightside" href="../src/lmdb/transaction.rs.html#196-200">source</a><a href="#impl-Transaction-for-RoTransaction%3C'env%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'env&gt; <a class="trait" href="trait.Transaction.html" title="trait lmdb::Transaction">Transaction</a> for <a class="struct" href="struct.RoTransaction.html" title="struct lmdb::RoTransaction">RoTransaction</a>&lt;'env&gt;</h3></section><section id="impl-Transaction-for-RwTransaction%3C'env%3E" class="impl"><a class="src rightside" href="../src/lmdb/transaction.rs.html#415-419">source</a><a href="#impl-Transaction-for-RwTransaction%3C'env%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'env&gt; <a class="trait" href="trait.Transaction.html" title="trait lmdb::Transaction">Transaction</a> for <a class="struct" href="struct.RwTransaction.html" title="struct lmdb::RwTransaction">RwTransaction</a>&lt;'env&gt;</h3></section></div><script src="../trait.impl/lmdb/transaction/trait.Transaction.js" async></script></section></div></main></body></html>